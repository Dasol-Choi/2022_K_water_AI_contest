## :droplet: [2022 제2회 K-water AI 경진대회] 수돗물 수요예측 AI 알고리즘 개발
### [2022-Task 2] 아포 : 경상북도 김천시 아포읍 (https://aifactory.space/competition/detail/2197)
#### 📌 대회 주제 및 목표
* 주제 : 지역별 상수원 수요 파악을 위한 배수지별 유량 적산차 예측
* 목표 : 대상지(아포 : 경상북도 김천시 아포읍)의 상수원 사용량에 따라 달라지는 배수지의 유량 적산차를 예측합니다. 정확한 수요 예측은 수자원 사용 및 수자원 공급에 필요한 에너지 소비를 최적화하는 데에 기여할 수 있습니다. 대상지의 경우 [농촌 지역]의 특성을 갖고 있습니다.
 
#### 📌 주최/주관 및 참가 대상
* 주최 : 한국수자원공사
* 주관 : AIFactory
* 참가 대상 : 인공지능을 통한 문제해결에 관심 있는 14세 이상 개인 및 팀

#### 📌 문제 유형 및 평가
* 예측 유형 : 1 to 336 시계열 예측 문제 
  * 배수지의 유량 적산차(1시간 단위)가 제공이 되고, 매 시점부터 총 14일(14×24 = 336시간) 분량의 적산차 변화를 예측
* 평가 기준: MAE(Mean Absolute Error)
* 점수 산정 기준 : private score(50%) + public sroce(50%)

#### 📌 대회 일정
* 대회기간 : 11월 21일 (월) 10:00 ~ 12월 09일 (금) 
---
#### :trophy: 대회 결과
* Private 점수 결과 TOP4 이내 (입상 후보)
#### :bar_chart: 전처리 
* 이상치 처리를 위해 피크값의 상·하안을 250과 45로 설정
* 이상치는 전 후 데이터 값을 통해 선형 보간
* 2019~2021년의 데이터 주기와 큰 차이가 있는 2018년 상반기 값들을 train 데이터에서 배제
#### :clipboard: 변수 선택
* 강수량, 기온 등 기상정보가 농경지의 수돗물 수요량에 영향을 미칠 수 있다고 판단하여 기상청에서 아포읍의 데이터를 받아 분석하였으나 유출유량과 상관관계가 적어 배제
*	추가로 datetime 객체의 특성을 이용해 year, month, day, hour 열을 생성하여 feature들 간 상관 관계를 확인 하였으나, 이 또한 관계성이 낮아 배제
* 최종적으로는 이전의 유량적산차 값만을 이용해 이후의 값들을 예측
#### :chart_with_downwards_trend: 모델링
* 시도한 모델 : DNN, LSTM, RNN, GRU, CNN, ConvLSTM
* 최종 선택 모델 : RNN
* 모델 선택 이유 : 전체적으로 성능이 좋았던 LSTM, RNN을 마지막까지 비교해 본 결과, RNN이 평균 성능이 더 좋았으며 학습 시간도 훨씬 빨라 앙상블 하기에도 적합하다고 판단
* 파마리터 튜닝 
  * 학습 데이터의 양이 많지 않아 layer 와 node 수를 늘렸을 때 성능이 오히려 떨어짐 
  * RNN 모델에서 learning rate를 충분히 줄였을 때 성능이 향상됨(0.00001 ~ 0.0009)
* 모델 앙상블 : RNN 모델을 총 13개 돌려 본 후 성능이 가장 우수한 10개 모델을 앙상블 함. 성능별로 순위를 메겨 순위 가중치를 각각 다르게 할당
